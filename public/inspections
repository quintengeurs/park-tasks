<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inspections and Inductions</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <header>
        <h1>Inspections and Inductions</h1>
        <nav>
            <a href="/">Home</a>
            <% if user.role == 'Admin' %>
                <a href="/admin">Admin</a>
            <% end %>
            <a href="/staff">Staff</a>
            <a href="/archive">Archive</a>
            <a href="/issues">Issues</a>
            <a href="/inspections">Inspections</a>
            <a href="/logout">Logout</a>
        </nav>
    </header>
    <main>
        <h2>Record Inspection/Induction</h2>
        <form action="/inspections" method="POST" class="task-form">
            <label>Location:</label>
            <input type="text" name="location" required>
            <label>Type:</label>
            <select name="type" id="inspectionType" required>
                <option value="Playground">Playground</option>
                <option value="Monthly Park Inspection">Monthly Park Inspection</option>
                <option value="Induction">Induction</option>
                <option value="H&S">H&S</option>
            </select>
            <label>Sub-Type:</label>
            <select name="subtype" id="inspectionSubtype">
                <option value="">Select Sub-Type</option>
            </select>
            <label>Notes:</label>
            <textarea name="notes"></textarea>
            <button type="submit">Submit</button>
        </form>
        <h2>Previous Inspections/Inductions</h2>
        <div class="task-list">
            <% inspections.each do |inspection| %>
                <div class="task-card">
                    <h3><%= inspection.type %> - <%= inspection.subtype || 'N/A' %></h3>
                    <p><strong>Location:</strong> <%= inspection.location %></p>
                    <p><strong>Date:</strong> <%= inspection.created_at %></p>
                    <% if inspection.notes %>
                        <p><strong>Notes:</strong> <%= inspection.notes %></p>
                    <% end %>
                </div>
            <% end %>
        </div>
    </main>
    <script src="/js/script.js"></script>
    <script>
        const typeSelect = document.getElementById('inspectionType');
        const subtypeSelect = document.getElementById('inspectionSubtype');
        const subtypes = {
            'Playground': ['Item', 'Surface', 'Fencing', 'Other'],
            'Monthly Park Inspection': ['Pathways', 'Fences and Walls', 'Admin', 'Signage', 'Bins', 'Benches', 'Trees', 'Other'],
            'Induction': ['Leaf Blower', 'Hedge Cutter', 'Strimmer', 'Ride on Mower', 'Mower', 'Outfront', 'Buggy', 'Other'],
            'H&S': ['Weekly Hot Water Testing', 'Call Point Testing', 'Fire Drill', 'Other']
        };

        typeSelect.addEventListener('change', function() {
            const selectedType = this.value;
            subtypeSelect.innerHTML = '<option value="">Select Sub-Type</option>';
            if (subtypes[selectedType]) {
                subtypes[selectedType].forEach(subtype => {
                    const option = document.createElement('option');
                    option.value = subtype;
                    option.textContent = subtype;
                    subtypeSelect.appendChild(option);
                });
            }
        });
    </script>
</body>
</html>
